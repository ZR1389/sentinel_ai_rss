# Railway deployment configuration for Sentinel AI

# Health Check Configuration
# Railway will ping this endpoint to check service health
healthcheck_path = "/health"

# Build Configuration  
[build]
  builder = "dockerfile"
  
[deploy]
  healthcheck_path = "/health"
  healthcheck_timeout = 30
  restart_policy = "on_failure"

# Cron jobs for maintenance tasks
[[cron]]
  name = "retention-cleanup"
  command = "python railway_cron.py cleanup"
  schedule = "0 */6 * * *"  # Every 6 hours
  
[[cron]]
  name = "daily-vacuum"
  command = "python railway_cron.py vacuum"
  schedule = "0 2 * * *"    # Daily at 2 AM UTC

# Environment Variables (set these in Railway Dashboard)
# Required:
# - DATABASE_URL
# - OPENAI_API_KEY (or XAI_API_KEY or DEEPSEEK_API_KEY)
# 
# Optional Retention Settings:
# - ALERT_RETENTION_DAYS=90 (default: 90 days)
# 
# Optional:
# - REDIS_URL
# - PORT (defaults to Railway's provided port)
# - KEYWORDS_SOURCE (defaults to "merge")
